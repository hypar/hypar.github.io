<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>HyPar: src/HyParFunctions/Cleanup.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>src/HyParFunctions/Cleanup.c File Reference</h1>
<p>Clean up and free memory after simulation is complete.  
<a href="#_details">More...</a></p>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00036_source.html">basic.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00035_source.html">bandedmatrix.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00045_source.html">mpivars.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00062_source.html">tridiagLU.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00037_source.html">boundaryconditions.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00040_source.html">immersedboundaries.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00061_source.html">timeintegration.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00041_source.html">interpolation.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00039_source.html">hypar.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00053_source.html">physicalmodels/linearadr.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00049_source.html">physicalmodels/fpdoublewell.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00050_source.html">physicalmodels/fppowersystem.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00051_source.html">physicalmodels/fppowersystem1bus.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00052_source.html">physicalmodels/fppowersystem3bus.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00047_source.html">physicalmodels/euler1d.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00048_source.html">physicalmodels/euler2d.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00054_source.html">physicalmodels/navierstokes2d.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00055_source.html">physicalmodels/navierstokes3d.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00056_source.html">physicalmodels/numa2d.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00057_source.html">physicalmodels/numa3d.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00058_source.html">physicalmodels/shallowwater1d.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00059_source.html">physicalmodels/shallowwater2d.h</a>&gt;</code><br/>

<p><a href="a00095_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#a8b1fb8a8ba0ff42211b16a1a901538f5">Cleanup</a> (void *s, void *m)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Clean up and free memory after simulation is complete. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Debojyoti Ghosh </dd></dl>

<p>Definition in file <a class="el" href="a00095_source.html">Cleanup.c</a>.</p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a8b1fb8a8ba0ff42211b16a1a901538f5"></a><!-- doxytag: member="Cleanup.c::Cleanup" ref="a8b1fb8a8ba0ff42211b16a1a901538f5" args="(void *s, void *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Cleanup </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>m</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Cleans up and frees the memory after the completion of the simulation. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>Solver object of type <a class="el" href="a00015.html" title="Structure containing all solver-specific variables and functions.">HyPar</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>m</em>&nbsp;</td><td>MPI object of type <a class="el" href="a00019.html" title="Structure of MPI-related variables.">MPIVariables</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00095_source.html#l00034">34</a> of file <a class="el" href="a00095_source.html">Cleanup.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00038"></a>00038 {
<a name="l00039"></a>00039   <a class="code" href="a00015.html" title="Structure containing all solver-specific variables and functions.">HyPar</a>           *solver   = (<a class="code" href="a00015.html" title="Structure containing all solver-specific variables and functions.">HyPar</a>*)          s;
<a name="l00040"></a>00040   <a class="code" href="a00019.html" title="Structure of MPI-related variables.">MPIVariables</a>    *mpi      = (<a class="code" href="a00019.html" title="Structure of MPI-related variables.">MPIVariables</a>*)   m;
<a name="l00041"></a>00041   <a class="code" href="a00004.html" title="Structure containing the variables and function pointers defining a boundary.">DomainBoundary</a>  *boundary = (<a class="code" href="a00004.html" title="Structure containing the variables and function pointers defining a boundary.">DomainBoundary</a>*) solver-&gt;<a class="code" href="a00015.html#a6b5109ac1048aa203b8969b91e72c3af">boundary</a>;
<a name="l00042"></a>00042   <span class="keywordtype">int</span>             i;
<a name="l00043"></a>00043   <a class="code" href="a00036.html#a68f50121fb9a7daeaf60e50cdef82ef3">_DECLARE_IERR_</a>;
<a name="l00044"></a>00044 
<a name="l00045"></a>00045   if (!mpi-&gt;<a class="code" href="a00019.html#a6cfd95afd0afebd625b889fb6e58371c">rank</a>) printf(<span class="stringliteral">&quot;Deallocating arrays.\n&quot;</span>);
<a name="l00046"></a>00046 
<a name="l00047"></a>00047   <span class="comment">/* Clean up boundary zones */</span>
<a name="l00048"></a>00048   <span class="keywordflow">for</span> (i = 0; i &lt; solver-&gt;<a class="code" href="a00015.html#a3f9a55664d1c8f058828ae9f4de11906">nBoundaryZones</a>; i++) {
<a name="l00049"></a>00049     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00037.html#af38bba62aa7b0f51ee9123ced0c46f24">BCCleanup</a>(&amp;boundary[i]); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00050"></a>00050   }
<a name="l00051"></a>00051   free(solver-&gt;<a class="code" href="a00015.html#a6b5109ac1048aa203b8969b91e72c3af">boundary</a>);
<a name="l00052"></a>00052 
<a name="l00053"></a>00053   <span class="comment">/* Clean up immersed boundaries */</span>
<a name="l00054"></a>00054   <span class="keywordflow">if</span> (solver-&gt;<a class="code" href="a00015.html#ae83b1b0117b6a805ead2e4728945814c">flag_ib</a>) {
<a name="l00055"></a>00055     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00040.html#a783bf18458c856297374e733c1d503ff">IBCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a8419c1760256467c117ef5932b943259">ib</a>);
<a name="l00056"></a>00056     free(solver-&gt;<a class="code" href="a00015.html#a8419c1760256467c117ef5932b943259">ib</a>);
<a name="l00057"></a>00057   }
<a name="l00058"></a>00058 
<a name="l00059"></a>00059   <span class="comment">/* Clean up any allocations in physical model */</span>
<a name="l00060"></a>00060   <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad3fe4b266b398f3a7567ac1b241d99a2">model</a>,<a class="code" href="a00053.html#a44c745170d88218420752d150856b01c">_LINEAR_ADVECTION_DIFFUSION_REACTION_</a>)) {
<a name="l00061"></a>00061     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00053.html#a114e6f1e977ae4220d29e8097e017f19">LinearADRCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a48e81a1806b5774943fd9a26e9a190f2">physics</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00062"></a>00062   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad3fe4b266b398f3a7567ac1b241d99a2">model</a>,<a class="code" href="a00049.html#a801cd9499779d35febbce73603aa70a6">_FP_DOUBLE_WELL_</a>)) {
<a name="l00063"></a>00063     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00049.html#ad512be0d21fc4b769fcc735ec3482203">FPDoubleWellCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a48e81a1806b5774943fd9a26e9a190f2">physics</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00064"></a>00064   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad3fe4b266b398f3a7567ac1b241d99a2">model</a>,<a class="code" href="a00050.html#aaeb0de68ad20c63864e1a6cdf819e836">_FP_POWER_SYSTEM_</a>)) {
<a name="l00065"></a>00065     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00050.html#ac613cf54a15aaed79e93bd3b12d81f44">FPPowerSystemCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a48e81a1806b5774943fd9a26e9a190f2">physics</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00066"></a>00066   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad3fe4b266b398f3a7567ac1b241d99a2">model</a>,<a class="code" href="a00051.html#a104fb063ee608b39fdab8d5e1e752ca3">_FP_POWER_SYSTEM_1BUS_</a>)) {
<a name="l00067"></a>00067     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00051.html#aa1df50611026cfcfb6c36f53a7620fef">FPPowerSystem1BusCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a48e81a1806b5774943fd9a26e9a190f2">physics</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00068"></a>00068   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad3fe4b266b398f3a7567ac1b241d99a2">model</a>,<a class="code" href="a00052.html#a5c8fe736dacda1a087bf1fb514761d6e">_FP_POWER_SYSTEM_3BUS_</a>)) {
<a name="l00069"></a>00069     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00052.html#a4fc9b84262e14bb803d7469cee294b30">FPPowerSystem3BusCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a48e81a1806b5774943fd9a26e9a190f2">physics</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00070"></a>00070   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad3fe4b266b398f3a7567ac1b241d99a2">model</a>,<a class="code" href="a00047.html#a076991b7fbc2b9c6330f792bbba182c2">_EULER_1D_</a>)) {
<a name="l00071"></a>00071     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00047.html#a8e310ddd9664225aef72a59b99baaaef">Euler1DCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a48e81a1806b5774943fd9a26e9a190f2">physics</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00072"></a>00072   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad3fe4b266b398f3a7567ac1b241d99a2">model</a>,<a class="code" href="a00048.html#ae205e355df87a13c8b47c958828bce2f">_EULER_2D_</a>)) {
<a name="l00073"></a>00073     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00048.html#ae2bd18386ee9184c66bb7e7b78f1b73b">Euler2DCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a48e81a1806b5774943fd9a26e9a190f2">physics</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00074"></a>00074   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad3fe4b266b398f3a7567ac1b241d99a2">model</a>,<a class="code" href="a00054.html#a04e16b3f2a882826e604b6353d9e5bcb">_NAVIER_STOKES_2D_</a>)) {
<a name="l00075"></a>00075     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00054.html#a6906f847d1d73981dfcfcebdb6cb70d4">NavierStokes2DCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a48e81a1806b5774943fd9a26e9a190f2">physics</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00076"></a>00076   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad3fe4b266b398f3a7567ac1b241d99a2">model</a>,<a class="code" href="a00055.html#a34099431ed2606bd884d36cea1d0448e">_NAVIER_STOKES_3D_</a>)) {
<a name="l00077"></a>00077     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00055.html#a5467b4e62f223583e901763082eb0d57">NavierStokes3DCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a48e81a1806b5774943fd9a26e9a190f2">physics</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00078"></a>00078   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad3fe4b266b398f3a7567ac1b241d99a2">model</a>,<a class="code" href="a00056.html#a82b3f90650895890211635171d649355">_NUMA2D_</a>)) {
<a name="l00079"></a>00079     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00056.html#a064e0d5fee20148d9337dadf871edda3">Numa2DCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a48e81a1806b5774943fd9a26e9a190f2">physics</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00080"></a>00080   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad3fe4b266b398f3a7567ac1b241d99a2">model</a>,<a class="code" href="a00057.html#a8bccae14dde8eaba7663344939367e96">_NUMA3D_</a>)) {
<a name="l00081"></a>00081     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00057.html#a4f6671875e6da5b2480003e749cc35f0">Numa3DCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a48e81a1806b5774943fd9a26e9a190f2">physics</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00082"></a>00082   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad3fe4b266b398f3a7567ac1b241d99a2">model</a>,<a class="code" href="a00058.html#ac280c6ead138670f1f518fad3ea94737">_SHALLOW_WATER_1D_</a>)) {
<a name="l00083"></a>00083     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00058.html#ab1bdb73df74d06f2e2aeb940b87fcdcf">ShallowWater1DCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a48e81a1806b5774943fd9a26e9a190f2">physics</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00084"></a>00084   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad3fe4b266b398f3a7567ac1b241d99a2">model</a>,<a class="code" href="a00059.html#aebe5d4a29761b0784c3d3e67e325105b">_SHALLOW_WATER_2D_</a>)) {
<a name="l00085"></a>00085     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00059.html#a5cfeeae3a3729d15543d8954060a48d4">ShallowWater2DCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a48e81a1806b5774943fd9a26e9a190f2">physics</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00086"></a>00086   }
<a name="l00087"></a>00087   free(solver-&gt;<a class="code" href="a00015.html#a48e81a1806b5774943fd9a26e9a190f2">physics</a>);
<a name="l00088"></a>00088 
<a name="l00089"></a>00089   <span class="comment">/* Clean up any allocations from time-integration */</span>
<a name="l00090"></a>00090 <span class="preprocessor">#ifdef with_petsc</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (!solver-&gt;<a class="code" href="a00015.html#ad195de8c64c407718e42cda9246be0d2">use_petscTS</a>) {
<a name="l00092"></a>00092     <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#a138e751362d14724df8e6ab27c4a5e55">time_scheme</a>,<a class="code" href="a00061.html#a50d4bf1e7e4825cc062fca99a770e5ce">_RK_</a>)) {
<a name="l00093"></a>00093       <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00061.html#a9da14408e0e1ce563553ac6638c48456">TimeExplicitRKCleanup</a>(solver-&gt;<a class="code" href="a00015.html#adec095311615891040de11341c01a77f">msti</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00094"></a>00094       free(solver-&gt;<a class="code" href="a00015.html#adec095311615891040de11341c01a77f">msti</a>);
<a name="l00095"></a>00095     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#a138e751362d14724df8e6ab27c4a5e55">time_scheme</a>,<a class="code" href="a00061.html#aad9619c099daeb3e6b1b7ef9e03e38d8">_GLM_GEE_</a>)) {
<a name="l00096"></a>00096       <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00061.html#a600e683b5282f669c7128044f55b2ec4">TimeGLMGEECleanup</a>(solver-&gt;<a class="code" href="a00015.html#adec095311615891040de11341c01a77f">msti</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00097"></a>00097       free(solver-&gt;<a class="code" href="a00015.html#adec095311615891040de11341c01a77f">msti</a>);
<a name="l00098"></a>00098     }
<a name="l00099"></a>00099   }
<a name="l00100"></a>00100 <span class="preprocessor">#else</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#a138e751362d14724df8e6ab27c4a5e55">time_scheme</a>,<a class="code" href="a00061.html#a50d4bf1e7e4825cc062fca99a770e5ce">_RK_</a>)) {
<a name="l00102"></a>00102     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00061.html#a9da14408e0e1ce563553ac6638c48456">TimeExplicitRKCleanup</a>(solver-&gt;<a class="code" href="a00015.html#adec095311615891040de11341c01a77f">msti</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00103"></a>00103     free(solver-&gt;<a class="code" href="a00015.html#adec095311615891040de11341c01a77f">msti</a>);
<a name="l00104"></a>00104   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(solver-&gt;<a class="code" href="a00015.html#a138e751362d14724df8e6ab27c4a5e55">time_scheme</a>,<a class="code" href="a00061.html#aad9619c099daeb3e6b1b7ef9e03e38d8">_GLM_GEE_</a>)) {
<a name="l00105"></a>00105     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00061.html#a600e683b5282f669c7128044f55b2ec4">TimeGLMGEECleanup</a>(solver-&gt;<a class="code" href="a00015.html#adec095311615891040de11341c01a77f">msti</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00106"></a>00106     free(solver-&gt;<a class="code" href="a00015.html#adec095311615891040de11341c01a77f">msti</a>);
<a name="l00107"></a>00107   }
<a name="l00108"></a>00108 <span class="preprocessor">#endif</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span>
<a name="l00110"></a>00110   <span class="comment">/* Clean up any spatial reconstruction related allocations */</span>
<a name="l00111"></a>00111   <span class="keywordflow">if</span> (   (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad29846eeb9c83b329a8d7c1fe69d46b2">spatial_scheme_hyp</a>,<a class="code" href="a00041.html#acfeff1b158131390b7129f4a857b15ff">_FIFTH_ORDER_WENO_</a>  )) 
<a name="l00112"></a>00112       || (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad29846eeb9c83b329a8d7c1fe69d46b2">spatial_scheme_hyp</a>,<a class="code" href="a00041.html#a175a82b8ae2b24c0ba51e1b1dd68c0e5">_FIFTH_ORDER_CRWENO_</a>))
<a name="l00113"></a>00113       || (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad29846eeb9c83b329a8d7c1fe69d46b2">spatial_scheme_hyp</a>,<a class="code" href="a00041.html#a6d34f5e8aae80a0d2a27ea20368dfef1">_FIFTH_ORDER_HCWENO_</a>)) ) {
<a name="l00114"></a>00114     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00041.html#a37dd034f5e9eb221bd3fd51cc8d1b0f4">WENOCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a29c46b81ad574e4dfbad5a7211487dcb">interp</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00115"></a>00115   }
<a name="l00116"></a>00116   <span class="keywordflow">if</span> (solver-&gt;<a class="code" href="a00015.html#a29c46b81ad574e4dfbad5a7211487dcb">interp</a>)   free(solver-&gt;<a class="code" href="a00015.html#a29c46b81ad574e4dfbad5a7211487dcb">interp</a>);
<a name="l00117"></a>00117   <span class="keywordflow">if</span> (   (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad29846eeb9c83b329a8d7c1fe69d46b2">spatial_scheme_hyp</a>,<a class="code" href="a00041.html#ae832e2314ee85139cec9df4ea82aafa2">_FIFTH_ORDER_COMPACT_UPWIND_</a> )) 
<a name="l00118"></a>00118       || (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad29846eeb9c83b329a8d7c1fe69d46b2">spatial_scheme_hyp</a>,<a class="code" href="a00041.html#a175a82b8ae2b24c0ba51e1b1dd68c0e5">_FIFTH_ORDER_CRWENO_</a>         ))
<a name="l00119"></a>00119       || (!strcmp(solver-&gt;<a class="code" href="a00015.html#ad29846eeb9c83b329a8d7c1fe69d46b2">spatial_scheme_hyp</a>,<a class="code" href="a00041.html#a6d34f5e8aae80a0d2a27ea20368dfef1">_FIFTH_ORDER_HCWENO_</a>         )) ) {
<a name="l00120"></a>00120     <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00041.html#acfaa225472f09e2ade88945e909d5893">CompactSchemeCleanup</a>(solver-&gt;<a class="code" href="a00015.html#a56318721d534e74a96b440f8542a0232">compact</a>); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00121"></a>00121   }
<a name="l00122"></a>00122   <span class="keywordflow">if</span> (solver-&gt;<a class="code" href="a00015.html#a56318721d534e74a96b440f8542a0232">compact</a>)  free(solver-&gt;<a class="code" href="a00015.html#a56318721d534e74a96b440f8542a0232">compact</a>);
<a name="l00123"></a>00123   <span class="keywordflow">if</span> (solver-&gt;<a class="code" href="a00015.html#a1dbfa1e479a373073b6ebf72401a7f0f">lusolver</a>) free(solver-&gt;<a class="code" href="a00015.html#a1dbfa1e479a373073b6ebf72401a7f0f">lusolver</a>);
<a name="l00124"></a>00124 
<a name="l00125"></a>00125   <span class="comment">/* Free the communicators created */</span>
<a name="l00126"></a>00126   <a class="code" href="a00036.html#ad6ab74942c9de13cf0b4c12eb0d91780">IERR</a> <a class="code" href="a00045.html#af59eb9eb78e6e99df5630429e5383617">MPIFreeCommunicators</a>(solver-&gt;<a class="code" href="a00015.html#a484873c74138512e41bc50d17b7d955a">ndims</a>,mpi); <a class="code" href="a00036.html#add9cf96ae374934d245a1dc1ab697a42">CHECKERR</a>(ierr);
<a name="l00127"></a>00127 
<a name="l00128"></a>00128   <span class="comment">/* These variables are allocated in Initialize.c */</span>
<a name="l00129"></a>00129   free(solver-&gt;<a class="code" href="a00015.html#aa989ebb755986852177779cdf7bd8c85">dim_global</a>);
<a name="l00130"></a>00130   free(solver-&gt;<a class="code" href="a00015.html#a38e0371f331cecbe63a77fa03e202afe">dim_local</a>);
<a name="l00131"></a>00131   free(solver-&gt;<a class="code" href="a00015.html#a95e9e0f8a692321b83a2e0ce2789c485">index</a>);
<a name="l00132"></a>00132   free(solver-&gt;<a class="code" href="a00015.html#a3b6b999a764f1e2ea94bb5f28c7a558c">u</a>);
<a name="l00133"></a>00133 <span class="preprocessor">#ifdef with_petsc</span>
<a name="l00134"></a>00134 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (solver-&gt;<a class="code" href="a00015.html#acab4b9b417d6c3745ad789099d3731c6">u0</a>)     free(solver-&gt;<a class="code" href="a00015.html#acab4b9b417d6c3745ad789099d3731c6">u0</a>);
<a name="l00135"></a>00135   <span class="keywordflow">if</span> (solver-&gt;<a class="code" href="a00015.html#a3ccc9ddb96600c40dcc41bb1ded11160">uref</a>)   free(solver-&gt;<a class="code" href="a00015.html#a3ccc9ddb96600c40dcc41bb1ded11160">uref</a>);
<a name="l00136"></a>00136   <span class="keywordflow">if</span> (solver-&gt;<a class="code" href="a00015.html#ad587a58397d439c443ae325450a01a13">rhsref</a>) free(solver-&gt;<a class="code" href="a00015.html#ad587a58397d439c443ae325450a01a13">rhsref</a>);
<a name="l00137"></a>00137   <span class="keywordflow">if</span> (solver-&gt;<a class="code" href="a00015.html#ade4650485fe35fd3e12fea272fc80209">rhs</a>)    free(solver-&gt;<a class="code" href="a00015.html#ade4650485fe35fd3e12fea272fc80209">rhs</a>);   
<a name="l00138"></a>00138 <span class="preprocessor">#endif</span>
<a name="l00139"></a>00139 <span class="preprocessor"></span>  free(solver-&gt;<a class="code" href="a00015.html#a267ef7e03dbe9dd4440dee2fdf48619a">iblank</a>);
<a name="l00140"></a>00140   free(solver-&gt;<a class="code" href="a00015.html#aeadfdde0fbc3058bace813055212dcc3">hyp</a>);
<a name="l00141"></a>00141   free(solver-&gt;<a class="code" href="a00015.html#ae53517ad7a202762d7b79eaf681701f3">par</a>);
<a name="l00142"></a>00142   free(solver-&gt;<a class="code" href="a00015.html#a6b4951ffdbd82f3a3848b82352d389d6">source</a>);
<a name="l00143"></a>00143   free(solver-&gt;<a class="code" href="a00015.html#aee7ff3b51db01ee6ed4038ff5311ed24">fluxC</a>);
<a name="l00144"></a>00144   free(solver-&gt;<a class="code" href="a00015.html#a86221feda74097db9eb6c900ca1e6cbc">uC</a>);
<a name="l00145"></a>00145   free(solver-&gt;<a class="code" href="a00015.html#af163100a3e0533dbf1868decd5c8201c">Deriv1</a>);
<a name="l00146"></a>00146   free(solver-&gt;<a class="code" href="a00015.html#a31bc6f5b337e72aa281a1ea5ad5d6832">Deriv2</a>);
<a name="l00147"></a>00147   free(solver-&gt;<a class="code" href="a00015.html#a983929b7b1511ff3e7800597adef6a91">fluxI</a>);
<a name="l00148"></a>00148   free(solver-&gt;<a class="code" href="a00015.html#a8452297a324a34268a6565583901347d">uL</a>);
<a name="l00149"></a>00149   free(solver-&gt;<a class="code" href="a00015.html#a3c811b25c11d2c98bfff02ddeadeb3d9">uR</a>);
<a name="l00150"></a>00150   free(solver-&gt;<a class="code" href="a00015.html#a99f72a44e29089b75fd11155bfcc1ff8">fL</a>);
<a name="l00151"></a>00151   free(solver-&gt;<a class="code" href="a00015.html#abb50b7a404febaf647f7bd89f873b96e">fR</a>);
<a name="l00152"></a>00152   free(solver-&gt;<a class="code" href="a00015.html#a711aad4cbe735871dd9e91ab575c878b">x</a>);
<a name="l00153"></a>00153   free(solver-&gt;<a class="code" href="a00015.html#aa24a4f5e29bd70cbe5a2413be1ea9682">dxinv</a>);
<a name="l00154"></a>00154   free(solver-&gt;<a class="code" href="a00015.html#a40e3f67b1530d5ea4e913fc60b594802">isPeriodic</a>);
<a name="l00155"></a>00155   free(mpi-&gt;<a class="code" href="a00019.html#a0be0f30a83bc3f3d9f6ee3a36bbf2716">iproc</a>);
<a name="l00156"></a>00156   free(mpi-&gt;<a class="code" href="a00019.html#aa3c28612a64b8a97bde66b720e15c700">ip</a>);
<a name="l00157"></a>00157   free(mpi-&gt;<a class="code" href="a00019.html#a481013ba007a99a4237cde5eeb3c9a29">is</a>);
<a name="l00158"></a>00158   free(mpi-&gt;<a class="code" href="a00019.html#a7602de5ebb1b59ec35217e78a35a531e">ie</a>);
<a name="l00159"></a>00159   free(mpi-&gt;<a class="code" href="a00019.html#af40a5a3066fdb53a47e4627071abc2bc">bcperiodic</a>);
<a name="l00160"></a>00160   free(mpi-&gt;<a class="code" href="a00019.html#aba3b15034da676474db917f9f5533085">sendbuf</a>);
<a name="l00161"></a>00161   free(mpi-&gt;<a class="code" href="a00019.html#afc23e46e08649e112e8d64d780cea5cb">recvbuf</a>);
<a name="l00162"></a>00162   free(solver-&gt;<a class="code" href="a00015.html#a57f7bff1d8bf27f2ca5c00270da00d05">VolumeIntegral</a>);
<a name="l00163"></a>00163   free(solver-&gt;<a class="code" href="a00015.html#a3aec36aeb5caac1e87f5b4f5f75d5a23">VolumeIntegralInitial</a>);
<a name="l00164"></a>00164   free(solver-&gt;<a class="code" href="a00015.html#ac3326fc53477d445133072e3f1fe6b59">StageBoundaryIntegral</a>);
<a name="l00165"></a>00165   free(solver-&gt;<a class="code" href="a00015.html#a6dfeed442d18083b68fd0f28d5f63fa7">StepBoundaryIntegral</a>);
<a name="l00166"></a>00166   free(solver-&gt;<a class="code" href="a00015.html#a644ed0ed36ed4af1c396c0af6aca043d">TotalBoundaryIntegral</a>);
<a name="l00167"></a>00167   free(solver-&gt;<a class="code" href="a00015.html#a965363cd64ce50ae17705dfb285dd0ab">ConservationError</a>);
<a name="l00168"></a>00168   free(solver-&gt;<a class="code" href="a00015.html#a39dc7def53a36bdc722aa90f52e04561">stride_with_ghosts</a>);
<a name="l00169"></a>00169   free(solver-&gt;<a class="code" href="a00015.html#a98bbff775d127bdd2451b55ce3d06e06">stride_without_ghosts</a>);
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   <span class="keywordflow">if</span> (solver-&gt;<a class="code" href="a00015.html#a0805db42e429173752189696c3c96909">filename_index</a>) free(solver-&gt;<a class="code" href="a00015.html#a0805db42e429173752189696c3c96909">filename_index</a>);
<a name="l00172"></a>00172 
<a name="l00173"></a>00173   <span class="keywordflow">return</span>(0);
<a name="l00174"></a>00174 }
</pre></div></p>

</div>
</div>
</div>
<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=10897352; 
var sc_invisible=1; 
var sc_security="83042f57"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="website
statistics" href="http://statcounter.com/"
target="_blank"><img class="statcounter"
src="//c.statcounter.com/10897352/0/83042f57/1/"
alt="website statistics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
