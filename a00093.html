<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>HyPar: src/HyParFunctions/CalculateConservationError.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>src/HyParFunctions/CalculateConservationError.c File Reference</h1>
<p>Compute the conservation error.  
<a href="#_details">More...</a></p>
<code>#include &lt;math.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00036_source.html">basic.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00043_source.html">mathfunctions.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00045_source.html">mpivars.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00039_source.html">hypar.h</a>&gt;</code><br/>

<p><a href="a00093_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00093.html#aef9a903e2e2870dbadbae56ab1b62eb7">CalculateConservationError</a> (void *s, void *m)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Compute the conservation error. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Debojyoti Ghosh </dd></dl>

<p>Definition in file <a class="el" href="a00093_source.html">CalculateConservationError.c</a>.</p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aef9a903e2e2870dbadbae56ab1b62eb7"></a><!-- doxytag: member="CalculateConservationError.c::CalculateConservationError" ref="aef9a903e2e2870dbadbae56ab1b62eb7" args="(void *s, void *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CalculateConservationError </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>m</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Calculates the error (L2) in conservation by computing the difference between the initial volume integral of the solution, and the sum of the current volume integral and the time integral of the boundary flux from the start of the simulation to the current simulation time. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>Solver object of type <a class="el" href="a00015.html" title="Structure containing all solver-specific variables and functions.">HyPar</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>m</em>&nbsp;</td><td>MPI object of type <a class="el" href="a00019.html" title="Structure of MPI-related variables.">MPIVariables</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00093_source.html#l00016">16</a> of file <a class="el" href="a00093_source.html">CalculateConservationError.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00020"></a>00020 {
<a name="l00021"></a>00021   <a class="code" href="a00015.html" title="Structure containing all solver-specific variables and functions.">HyPar</a>         *solver = (<a class="code" href="a00015.html" title="Structure containing all solver-specific variables and functions.">HyPar</a>*) s;
<a name="l00022"></a>00022   <span class="keywordtype">int</span>           v,nvars = solver-&gt;<a class="code" href="a00015.html#ae8f6d2fd6490d3153cb4133bf183a404">nvars</a>;
<a name="l00023"></a>00023   <span class="keywordtype">double</span>        error;
<a name="l00024"></a>00024 
<a name="l00025"></a>00025   <span class="keywordtype">double</span> base[nvars];
<a name="l00026"></a>00026   <span class="keywordflow">for</span> (v=0; v&lt;nvars; v++) {
<a name="l00027"></a>00027     <span class="keywordflow">if</span> (<a class="code" href="a00043.html#adf1be5ccbb7a2522b4f3a64043c72880">absolute</a>(solver-&gt;<a class="code" href="a00015.html#a3aec36aeb5caac1e87f5b4f5f75d5a23">VolumeIntegralInitial</a>[v]) &gt; 1.0)
<a name="l00028"></a>00028       base[v] = <a class="code" href="a00043.html#adf1be5ccbb7a2522b4f3a64043c72880">absolute</a>(solver-&gt;<a class="code" href="a00015.html#a3aec36aeb5caac1e87f5b4f5f75d5a23">VolumeIntegralInitial</a>[v]);
<a name="l00029"></a>00029     <span class="keywordflow">else</span> base[v] = 1.0;
<a name="l00030"></a>00030   }
<a name="l00031"></a>00031   
<a name="l00032"></a>00032   <span class="keywordflow">for</span> (v=0; v&lt;nvars; v++) {
<a name="l00033"></a>00033     error =  (solver-&gt;<a class="code" href="a00015.html#a57f7bff1d8bf27f2ca5c00270da00d05">VolumeIntegral</a>[v]+solver-&gt;<a class="code" href="a00015.html#a644ed0ed36ed4af1c396c0af6aca043d">TotalBoundaryIntegral</a>[v]-solver-&gt;<a class="code" href="a00015.html#a3aec36aeb5caac1e87f5b4f5f75d5a23">VolumeIntegralInitial</a>[v]) 
<a name="l00034"></a>00034            * (solver-&gt;<a class="code" href="a00015.html#a57f7bff1d8bf27f2ca5c00270da00d05">VolumeIntegral</a>[v]+solver-&gt;<a class="code" href="a00015.html#a644ed0ed36ed4af1c396c0af6aca043d">TotalBoundaryIntegral</a>[v]-solver-&gt;<a class="code" href="a00015.html#a3aec36aeb5caac1e87f5b4f5f75d5a23">VolumeIntegralInitial</a>[v]);
<a name="l00035"></a>00035     solver-&gt;<a class="code" href="a00015.html#a965363cd64ce50ae17705dfb285dd0ab">ConservationError</a>[v] = sqrt(error)/base[v];
<a name="l00036"></a>00036   }
<a name="l00037"></a>00037   
<a name="l00038"></a>00038   <span class="keywordflow">return</span>(0);
<a name="l00039"></a>00039 }
</pre></div></p>

</div>
</div>
</div>
<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=10897352; 
var sc_invisible=1; 
var sc_security="83042f57"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="website
statistics" href="http://statcounter.com/"
target="_blank"><img class="statcounter"
src="//c.statcounter.com/10897352/0/83042f57/1/"
alt="website statistics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
